---
name: backend-testing
description: Write comprehensive backend tests including unit tests, integration tests, and API tests. Use when testing REST APIs, database operations, authentication flows, or business logic. Handles Jest, Pytest, Mocha, testing strategies, mocking, and test coverage.
tags: [testing, backend, unit-test, integration-test, API-test, Jest, Pytest, TDD]
platforms: [Claude, ChatGPT, Gemini]
---

# Backend Testing

## ëª©ì  (Purpose)

ë°±ì—”ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì•ˆì •ì„±ê³¼ í’ˆì§ˆì„ ë³´ì¥í•˜ëŠ” í¬ê´„ì ì¸ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.

ì´ ìŠ¤í‚¬ì€ ë‹¤ìŒì„ ë„ì™€ì¤ë‹ˆë‹¤:
- Unit, Integration, E2E í…ŒìŠ¤íŠ¸ ì‘ì„±
- REST API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸
- ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—… í…ŒìŠ¤íŠ¸
- ì¸ì¦/ê¶Œí•œ í…ŒìŠ¤íŠ¸
- í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ í–¥ìƒ

## ì‚¬ìš© ì‹œì  (When to Use)

ì´ ìŠ¤í‚¬ì„ íŠ¸ë¦¬ê±°í•´ì•¼ í•˜ëŠ” êµ¬ì²´ì ì¸ ìƒí™©ì„ ë‚˜ì—´í•©ë‹ˆë‹¤:

- **ìƒˆ ê¸°ëŠ¥ ê°œë°œ**: TDD(Test-Driven Development) ë°©ì‹ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ë¨¼ì € ì‘ì„±
- **API ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€**: REST APIì˜ ì„±ê³µ/ì‹¤íŒ¨ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸
- **ë²„ê·¸ ìˆ˜ì •**: íšŒê·€ ë°©ì§€ë¥¼ ìœ„í•œ í…ŒìŠ¤íŠ¸ ì¶”ê°€
- **ë¦¬íŒ©í† ë§ ì „**: ê¸°ì¡´ ë™ì‘ì„ ë³´ì¥í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì‘ì„±
- **CI/CD ì„¤ì •**: ìë™í™”ëœ í…ŒìŠ¤íŠ¸ íŒŒì´í”„ë¼ì¸ êµ¬ì¶•

## ì…ë ¥ í˜•ì‹ (Input Format)

ì‚¬ìš©ìë¡œë¶€í„° ë°›ì•„ì•¼ í•  ì…ë ¥ì˜ í˜•ì‹ê³¼ í•„ìˆ˜/ì„ íƒ ì •ë³´:

### í•„ìˆ˜ ì •ë³´
- **í”„ë ˆì„ì›Œí¬**: Express, Django, FastAPI, Spring Boot ë“±
- **í…ŒìŠ¤íŠ¸ ë„êµ¬**: Jest, Pytest, Mocha/Chai, JUnit ë“±
- **í…ŒìŠ¤íŠ¸ ëŒ€ìƒ**: API ì—”ë“œí¬ì¸íŠ¸, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, DB ì‘ì—… ë“±

### ì„ íƒ ì •ë³´
- **ë°ì´í„°ë² ì´ìŠ¤**: PostgreSQL, MySQL, MongoDB (ê¸°ë³¸ê°’: in-memory DB)
- **ëª¨í‚¹ ë¼ì´ë¸ŒëŸ¬ë¦¬**: jest.mock, sinon, unittest.mock (ê¸°ë³¸ê°’: í”„ë ˆì„ì›Œí¬ ë‚´ì¥)
- **ì»¤ë²„ë¦¬ì§€ ëª©í‘œ**: 80%, 90% ë“± (ê¸°ë³¸ê°’: 80%)
- **E2E ë„êµ¬**: Supertest, TestClient, RestAssured (ì„ íƒ)

### ì…ë ¥ ì˜ˆì‹œ

```
Express.js APIì˜ ì‚¬ìš©ì ì¸ì¦ ì—”ë“œí¬ì¸íŠ¸ë¥¼ í…ŒìŠ¤íŠ¸í•´ì¤˜:
- í”„ë ˆì„ì›Œí¬: Express + TypeScript
- í…ŒìŠ¤íŠ¸ ë„êµ¬: Jest + Supertest
- ëŒ€ìƒ: POST /auth/register, POST /auth/login
- DB: PostgreSQL (í…ŒìŠ¤íŠ¸ìš© in-memory)
- ì»¤ë²„ë¦¬ì§€: 90% ì´ìƒ
```

## ì‘ì—… ì ˆì°¨ (Procedure)

ë‹¨ê³„ë³„ë¡œ ì •í™•í•˜ê²Œ ë”°ë¼ì•¼ í•  ì‘ì—… ìˆœì„œë¥¼ ëª…ì‹œí•©ë‹ˆë‹¤. êµ¬ì²´ì ì¸ ì½”ë“œ ì˜ˆì œëŠ” [EXAMPLES.md](./EXAMPLES.md)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

### 1ë‹¨ê³„: í…ŒìŠ¤íŠ¸ í™˜ê²½ ì„¤ì •

í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ ë° ë„êµ¬ë¥¼ ì„¤ì¹˜í•˜ê³  ì„¤ì •í•©ë‹ˆë‹¤.

**ì‘ì—… ë‚´ìš©**:
- í…ŒìŠ¤íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
- í…ŒìŠ¤íŠ¸ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • (in-memory ë˜ëŠ” ë³„ë„ DB)
- í™˜ê²½ë³€ìˆ˜ ë¶„ë¦¬ (.env.test)
- jest.config.js ë˜ëŠ” pytest.ini ì„¤ì •

ğŸ‘‰ **ìƒì„¸ ì½”ë“œ**: [EXAMPLES.md > 1ë‹¨ê³„: í…ŒìŠ¤íŠ¸ í™˜ê²½ ì„¤ì •](./EXAMPLES.md#1ë‹¨ê³„-í…ŒìŠ¤íŠ¸-í™˜ê²½-ì„¤ì •)

### 2ë‹¨ê³„: Unit Test ì‘ì„± (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)

ê°œë³„ í•¨ìˆ˜/í´ë˜ìŠ¤ì˜ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.

**ì‘ì—… ë‚´ìš©**:
- ìˆœìˆ˜ í•¨ìˆ˜ í…ŒìŠ¤íŠ¸ (ì˜ì¡´ì„± ì—†ìŒ)
- ëª¨í‚¹ì„ í†µí•œ ì˜ì¡´ì„± ê²©ë¦¬
- Edge case í…ŒìŠ¤íŠ¸ (ê²½ê³„ê°’, ì˜ˆì™¸)
- AAA íŒ¨í„´ (Arrange-Act-Assert)

**íŒë‹¨ ê¸°ì¤€**:
- ì™¸ë¶€ ì˜ì¡´ì„±(DB, API) ì—†ìŒ â†’ ìˆœìˆ˜ Unit Test
- ì™¸ë¶€ ì˜ì¡´ì„± ìˆìŒ â†’ Mock/Stub ì‚¬ìš©
- ë³µì¡í•œ ë¡œì§ â†’ ë‹¤ì–‘í•œ ì…ë ¥ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸

ğŸ‘‰ **ìƒì„¸ ì½”ë“œ**: [EXAMPLES.md > 2ë‹¨ê³„: Unit Test ì‘ì„±](./EXAMPLES.md#2ë‹¨ê³„-unit-test-ì‘ì„±-ë¹„ì¦ˆë‹ˆìŠ¤-ë¡œì§)

### 3ë‹¨ê³„: Integration Test (API ì—”ë“œí¬ì¸íŠ¸)

API ì—”ë“œí¬ì¸íŠ¸ì˜ í†µí•© í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.

**ì‘ì—… ë‚´ìš©**:
- HTTP ìš”ì²­/ì‘ë‹µ í…ŒìŠ¤íŠ¸
- ì„±ê³µ ì¼€ì´ìŠ¤ (200, 201)
- ì‹¤íŒ¨ ì¼€ì´ìŠ¤ (400, 401, 404, 500)
- ì¸ì¦/ê¶Œí•œ í…ŒìŠ¤íŠ¸
- ì…ë ¥ ê²€ì¦ í…ŒìŠ¤íŠ¸

**í™•ì¸ ì‚¬í•­**:
- [x] Status code í™•ì¸
- [x] Response body êµ¬ì¡° ê²€ì¦
- [x] Database ìƒíƒœ ë³€í™” í™•ì¸
- [x] ì—ëŸ¬ ë©”ì‹œì§€ ê²€ì¦

ğŸ‘‰ **ìƒì„¸ ì½”ë“œ**: [EXAMPLES.md > 3ë‹¨ê³„: Integration Test](./EXAMPLES.md#3ë‹¨ê³„-integration-test-api-ì—”ë“œí¬ì¸íŠ¸)

### 4ë‹¨ê³„: ì¸ì¦/ê¶Œí•œ í…ŒìŠ¤íŠ¸

JWT í† í° ë° ê¶Œí•œ ê¸°ë°˜ ì ‘ê·¼ ì œì–´ë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.

**ì‘ì—… ë‚´ìš©**:
- í† í° ì—†ì´ ì ‘ê·¼ ì‹œ 401 í™•ì¸
- ìœ íš¨í•œ í† í°ìœ¼ë¡œ ì ‘ê·¼ ì„±ê³µ í™•ì¸
- ë§Œë£Œëœ í† í° ì²˜ë¦¬ í…ŒìŠ¤íŠ¸
- Role-based ê¶Œí•œ í…ŒìŠ¤íŠ¸

ğŸ‘‰ **ìƒì„¸ ì½”ë“œ**: [EXAMPLES.md > 4ë‹¨ê³„: ì¸ì¦/ê¶Œí•œ í…ŒìŠ¤íŠ¸](./EXAMPLES.md#4ë‹¨ê³„-ì¸ì¦ê¶Œí•œ-í…ŒìŠ¤íŠ¸)

### 5ë‹¨ê³„: Mocking ë° í…ŒìŠ¤íŠ¸ ê²©ë¦¬

ì™¸ë¶€ ì˜ì¡´ì„±ì„ ëª¨í‚¹í•˜ì—¬ í…ŒìŠ¤íŠ¸ë¥¼ ê²©ë¦¬í•©ë‹ˆë‹¤.

**ì‘ì—… ë‚´ìš©**:
- ì™¸ë¶€ API ëª¨í‚¹
- ì´ë©”ì¼ ë°œì†¡ ëª¨í‚¹
- íŒŒì¼ ì‹œìŠ¤í…œ ëª¨í‚¹
- ì‹œê°„ ê´€ë ¨ í•¨ìˆ˜ ëª¨í‚¹

ğŸ‘‰ **ìƒì„¸ ì½”ë“œ**: [EXAMPLES.md > 5ë‹¨ê³„: Mocking ë° í…ŒìŠ¤íŠ¸ ê²©ë¦¬](./EXAMPLES.md#5ë‹¨ê³„-mocking-ë°-í…ŒìŠ¤íŠ¸-ê²©ë¦¬)

## ì¶œë ¥ í¬ë§· (Output Format)

ê²°ê³¼ë¬¼ì´ ë”°ë¼ì•¼ í•  ì •í™•í•œ í˜•ì‹ì„ ì •ì˜í•©ë‹ˆë‹¤.

### ê¸°ë³¸ êµ¬ì¡°

```
í”„ë¡œì íŠ¸/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ __tests__/
â”‚   â”‚   â”œâ”€â”€ setup.ts                 # í…ŒìŠ¤íŠ¸ ì „ì—­ ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â””â”€â”€ password.test.ts     # Unit tests
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â””â”€â”€ emailService.test.ts
â”‚   â”‚   â””â”€â”€ api/
â”‚   â”‚       â”œâ”€â”€ auth.test.ts         # Integration tests
â”‚   â”‚       â””â”€â”€ users.test.ts
â”‚   â””â”€â”€ ...
â”œâ”€â”€ jest.config.js
â””â”€â”€ package.json
```

### í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸ (package.json)

```json
{
  "scripts": {
    "test": "jest",
    "test:watch": "jest --watch",
    "test:coverage": "jest --coverage",
    "test:ci": "jest --ci --coverage --maxWorkers=2"
  }
}
```

## ì œì•½ì‚¬í•­ (Constraints)

ë°˜ë“œì‹œ ì§€ì¼œì•¼ í•  ê·œì¹™ê³¼ ê¸ˆì§€ ì‚¬í•­ì„ ëª…ì‹œí•©ë‹ˆë‹¤.

### í•„ìˆ˜ ê·œì¹™ (MUST)

1. **í…ŒìŠ¤íŠ¸ ê²©ë¦¬**: ê° í…ŒìŠ¤íŠ¸ëŠ” ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰ ê°€ëŠ¥í•´ì•¼ í•¨
   - beforeEach/afterEachë¡œ ìƒíƒœ ì´ˆê¸°í™”
   - í…ŒìŠ¤íŠ¸ ìˆœì„œì— ì˜ì¡´í•˜ì§€ ì•ŠìŒ

2. **ëª…í™•í•œ í…ŒìŠ¤íŠ¸ëª…**: í…ŒìŠ¤íŠ¸ê°€ ë¬´ì—‡ì„ ê²€ì¦í•˜ëŠ”ì§€ ì´ë¦„ì—ì„œ ì•Œ ìˆ˜ ìˆì–´ì•¼ í•¨
   - âœ… 'should reject duplicate email'
   - âŒ 'test1'

3. **AAA íŒ¨í„´**: Arrange(ì¤€ë¹„) - Act(ì‹¤í–‰) - Assert(ê²€ì¦) êµ¬ì¡°
   - ê°€ë…ì„± í–¥ìƒ
   - í…ŒìŠ¤íŠ¸ ì˜ë„ ëª…í™•í™”

### ê¸ˆì§€ ì‚¬í•­ (MUST NOT)

1. **í”„ë¡œë•ì…˜ DB ì‚¬ìš© ê¸ˆì§€**: í…ŒìŠ¤íŠ¸ëŠ” ë³„ë„ DB ë˜ëŠ” in-memory DB ì‚¬ìš©
   - ì‹¤ì œ ë°ì´í„° ì†ì‹¤ ìœ„í—˜
   - í…ŒìŠ¤íŠ¸ ê²©ë¦¬ ë¶ˆê°€

2. **ì‹¤ì œ ì™¸ë¶€ API í˜¸ì¶œ ê¸ˆì§€**: ì™¸ë¶€ ì„œë¹„ìŠ¤ëŠ” ëª¨í‚¹
   - ë„¤íŠ¸ì›Œí¬ ì˜ì¡´ì„± ì œê±°
   - í…ŒìŠ¤íŠ¸ ì†ë„ í–¥ìƒ
   - ë¹„ìš© ì ˆê°

3. **Sleep/Timeout ë‚¨ìš© ê¸ˆì§€**: ì‹œê°„ ê¸°ë°˜ í…ŒìŠ¤íŠ¸ëŠ” ê°€ì§œ íƒ€ì´ë¨¸ ì‚¬ìš©
   - jest.useFakeTimers()
   - í…ŒìŠ¤íŠ¸ ì†ë„ ì €í•˜ ë°©ì§€

### ë³´ì•ˆ ê·œì¹™

- **ë¯¼ê°ì •ë³´ í•˜ë“œì½”ë”© ê¸ˆì§€**: í…ŒìŠ¤íŠ¸ ì½”ë“œì—ë„ API í‚¤, ë¹„ë°€ë²ˆí˜¸ í•˜ë“œì½”ë”© ê¸ˆì§€
- **í™˜ê²½ë³€ìˆ˜ ë¶„ë¦¬**: .env.test íŒŒì¼ ì‚¬ìš©

## ë©”íƒ€ë°ì´í„°

### ë²„ì „
- **í˜„ì¬ ë²„ì „**: 1.0.0
- **ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-01-01
- **í˜¸í™˜ í”Œë«í¼**: Claude, ChatGPT, Gemini

### ê´€ë ¨ ìŠ¤í‚¬
- [api-design](../api-design/SKILL.md): APIì™€ í•¨ê»˜ í…ŒìŠ¤íŠ¸ ì„¤ê³„
- [authentication-setup](../authentication/SKILL.md): ì¸ì¦ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸
- [refactoring](../refactoring/SKILL.md): ë¦¬íŒ©í† ë§ ì•ˆì •ì„± í™•ë³´

### íƒœê·¸
`#testing` `#backend` `#Jest` `#Pytest` `#unit-test` `#integration-test` `#TDD` `#API-test`
